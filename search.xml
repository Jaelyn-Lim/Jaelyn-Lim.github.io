<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title><![CDATA[Django Rest framework + vue 笔记 04]]></title>
      <url>/2018/02/20/django-rest-vue04/</url>
      <content type="html"><![CDATA[<h2 id="使用类继承View的方式写接口"><a href="#使用类继承View的方式写接口" class="headerlink" title="使用类继承View的方式写接口"></a>使用类继承View的方式写接口</h2><h3 id="导入基础view"><a href="#导入基础view" class="headerlink" title="导入基础view"></a>导入基础view</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.views.generic.base <span class="keyword">import</span> View</span><br></pre></td></tr></table></figure>
<h3 id="在类中继承"><a href="#在类中继承" class="headerlink" title="在类中继承"></a>在类中继承</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsListView</span><span class="params">(View)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="数据字典化的方式（序列化）"><a href="#数据字典化的方式（序列化）" class="headerlink" title="数据字典化的方式（序列化）"></a>数据字典化的方式（序列化）</h2><h3 id="传统"><a href="#传统" class="headerlink" title="传统"></a>传统</h3><h4 id="查询-循环-赋值方式"><a href="#查询-循环-赋值方式" class="headerlink" title="查询-循环-赋值方式"></a>查询-循环-赋值方式</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">json_list = []</span><br><span class="line">goods = Goods.objects.all()[:<span class="number">10</span>]</span><br><span class="line"><span class="keyword">for</span> good <span class="keyword">in</span> goods:</span><br><span class="line">	json_dict = &#123;&#125;</span><br><span class="line">	json_dict[<span class="string">"name"</span>] = good.name</span><br><span class="line">	json_dict[<span class="string">"category"</span>] = good.category.name</span><br><span class="line">	json_dict[<span class="string">"market_price"</span>] = good.market_price</span><br><span class="line">	json_dict[<span class="string">"add_time"</span>] = good.add_time <span class="comment"># 这里会出现错误，报错原因是时间格式不能序列化成json</span></span><br><span class="line">	json_list.append(json_dict)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">return</span> HttpResponse(json.dumps(json_list), content_tyoe=<span class="string">"application/json"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="使用Django自带的model-to-dict"><a href="#使用Django自带的model-to-dict" class="headerlink" title="使用Django自带的model_to_dict"></a>使用Django自带的<em>model_to_dict</em></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.forms.models <span class="keyword">import</span> model_to_dict</span><br><span class="line">	<span class="keyword">for</span> good <span class="keyword">in</span> goods:</span><br><span class="line">	json_dict = model_to_dict(good) <span class="comment"># 这里也有可能报错，有些字段不能序列化</span></span><br><span class="line">	json_list.append(json_dict)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">return</span> HttpResponse(json.dumps(json_list), content_tyoe=<span class="string">"application/json"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="使用serializers"><a href="#使用serializers" class="headerlink" title="使用serializers"></a>使用serializers</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> django.core <span class="keyword">import</span> serializers</span><br><span class="line"></span><br><span class="line">json_data = serializers.serialize(<span class="string">'json'</span>, goods)</span><br><span class="line">json_data = json.loads(json_data)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"><span class="keyword">return</span> JsonResponse(json_data, safe=<span class="keyword">False</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Django-rest-Framework"><a href="#Django-rest-Framework" class="headerlink" title="Django rest Framework"></a>Django rest Framework</h2><ul>
<li><a href="http://www.django-rest-framework.org/" target="_blank" rel="noopener">Django REST framework</a></li>
</ul>
<h3 id="一些依赖包"><a href="#一些依赖包" class="headerlink" title="一些依赖包"></a>一些依赖包</h3><p>The following packages are optional:</p>
<ul>
<li><a href="https://pypi.python.org/pypi/coreapi/" target="_blank" rel="noopener">coreapi</a> (1.32.0+) - Schema generation support.</li>
<li><a href="https://pypi.python.org/pypi/Markdown/" target="_blank" rel="noopener">Markdown</a> (2.1.0+) - Markdown support for the browsable API.</li>
<li><a href="https://pypi.python.org/pypi/django-filter" target="_blank" rel="noopener">django-filter</a> (1.0.1+) - Filtering support.</li>
<li><a href="https://github.com/maraujop/django-crispy-forms" target="_blank" rel="noopener">django-crispy-forms</a> - Improved HTML display for filtering.</li>
<li><a href="https://github.com/django-guardian/django-guardian" target="_blank" rel="noopener">django-guardian</a> (1.1.1+) - Object level permissions support.</li>
</ul>
<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pip install django-guardian</span><br><span class="line">pip install coreapi</span><br><span class="line">pip install django-filter</span><br><span class="line">pip install --upgrade django-crispy-forms</span><br><span class="line">pip install markdown</span><br></pre></td></tr></table></figure>
<p><em>注意这些包一定要装，不然后面有些依赖会报错</em></p>
<h3 id="使用文档（documentation）"><a href="#使用文档（documentation）" class="headerlink" title="使用文档（documentation）"></a>使用文档（documentation）</h3><ul>
<li>在url.py文件中引入</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.documentation <span class="keyword">import</span> include_docs_urls</span><br></pre></td></tr></table></figure>
<ul>
<li>导入该url，注意结尾不要有“/”</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">	<span class="comment"># ...</span></span><br><span class="line">    url(<span class="string">r'docs/'</span>, include_docs_urls(title=<span class="string">"doc"</span>)),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="一些初始化"><a href="#一些初始化" class="headerlink" title="一些初始化"></a>一些初始化</h3><h4 id="setting-py文件"><a href="#setting-py文件" class="headerlink" title="setting.py文件"></a>setting.py文件</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">    <span class="string">'rest_framework'</span>,</span><br><span class="line">    <span class="string">'crispy_forms'</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h4 id="url-py文件"><a href="#url-py文件" class="headerlink" title="url.py文件"></a>url.py文件</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">	url(<span class="string">r'^api-auth/'</span>, include(<span class="string">'rest_framework.urls'</span>, namespace=<span class="string">'rest_framework'</span>)),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="使用-class-based-views（基础的view）"><a href="#使用-class-based-views（基础的view）" class="headerlink" title="使用 class-based views（基础的view）"></a>使用 class-based views（基础的view）</h3><h4 id="使用自己的Serializer（参考）"><a href="#使用自己的Serializer（参考）" class="headerlink" title="使用自己的Serializer（参考）"></a>使用自己的Serializer（参考）</h4><ul>
<li>在对应的app下新建文件，serializers.py</li>
<li>基本内容内容</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SnippetSerializer</span><span class="params">(serializers.Serializer)</span>:</span></span><br><span class="line">    id = serializers.IntegerField(read_only=<span class="keyword">True</span>)</span><br><span class="line">    title = serializers.CharField(required=<span class="keyword">False</span>, allow_blank=<span class="keyword">True</span>, max_length=<span class="number">100</span>)</span><br><span class="line">    code = serializers.CharField(style=&#123;<span class="string">'base_template'</span>: <span class="string">'textarea.html'</span>&#125;)</span><br><span class="line">    linenos = serializers.BooleanField(required=<span class="keyword">False</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>在view文件中</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> snippets.models <span class="keyword">import</span> Snippet</span><br><span class="line"><span class="keyword">from</span> snippets.serializers <span class="keyword">import</span> SnippetSerializer</span><br><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SnippetList</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    List all snippets, or create a new snippet.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, format=None)</span>:</span></span><br><span class="line">        snippets = Snippet.objects.all()</span><br><span class="line">        serializer = SnippetSerializer(snippets, many=<span class="keyword">True</span>)</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.data)</span><br></pre></td></tr></table></figure>
<p>备用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">STATIC_URL = <span class="string">'/static/'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MEDIA_URL = <span class="string">"/media/"</span></span><br><span class="line">STATICFILES_DIRS = (</span><br><span class="line">    os.path.join(BASE_DIR, <span class="string">"static"</span>),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">MEDIA_ROOT = os.path.join(BASE_DIR, <span class="string">"media"</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在setting.py中如果配置了这个媒体路径，Django rest framework 就会在媒体路径之上加上这个路径，这样就能获得图片路径的完整地址</p>
</blockquote>
<h4 id="将数据保存到数据库中"><a href="#将数据保存到数据库中" class="headerlink" title="将数据保存到数据库中"></a>将数据保存到数据库中</h4><ul>
<li>在serializers.py文件中，需要保存的字段中，覆写create方法</li>
<li>作为给前端添加数据的一个接口</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</span><br><span class="line"><span class="keyword">from</span> snippets.models <span class="keyword">import</span> Snippet</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SnippetSerializer</span><span class="params">(serializers.Serializer)</span>:</span></span><br><span class="line">    id = serializers.IntegerField(read_only=<span class="keyword">True</span>)</span><br><span class="line">    title = serializers.CharField(required=<span class="keyword">False</span>, allow_blank=<span class="keyword">True</span>, max_length=<span class="number">100</span>)</span><br><span class="line">    code = serializers.CharField(style=&#123;<span class="string">'base_template'</span>: <span class="string">'textarea.html'</span>&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create</span><span class="params">(self, validated_data)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Create and return a new `Snippet` instance, given the validated data.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> Snippet.objects.create(**validated_data)</span><br></pre></td></tr></table></figure>
<ul>
<li>在view中添加一个post方法</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> snippets.models <span class="keyword">import</span> Snippet</span><br><span class="line"><span class="keyword">from</span> snippets.serializers <span class="keyword">import</span> SnippetSerializer</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> Http404</span><br><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> status</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SnippetList</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    List all snippets, or create a new snippet.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, format=None)</span>:</span></span><br><span class="line">        snippets = Snippet.objects.all()</span><br><span class="line">        serializer = SnippetSerializer(snippets, many=<span class="keyword">True</span>)</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.data)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, format=None)</span>:</span></span><br><span class="line">        serializer = SnippetSerializer(data=request.data)</span><br><span class="line">        <span class="keyword">if</span> serializer.is_valid():</span><br><span class="line">            serializer.save()</span><br><span class="line">            <span class="keyword">return</span> Response(serializer.data, status=status.HTTP_201_CREATED)</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)</span><br></pre></td></tr></table></figure>
<h3 id="使用ModelSerializers"><a href="#使用ModelSerializers" class="headerlink" title="使用ModelSerializers"></a>使用ModelSerializers</h3><ul>
<li>在serializer中</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</span><br><span class="line"><span class="keyword">from</span> snippets.models <span class="keyword">import</span> Snippet</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SnippetSerializer</span><span class="params">(serializers.ModelSerializer)</span>:</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Snippet</span><br><span class="line">        fields = (<span class="string">'id'</span>, <span class="string">'title'</span>, <span class="string">'code'</span>, <span class="string">'linenos'</span>, <span class="string">'language'</span>, <span class="string">'style'</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：名字要和model中的一致，包括一开始使用的验证，名字也要相同</p>
</blockquote>
<h4 id="取出所有字段"><a href="#取出所有字段" class="headerlink" title="取出所有字段"></a>取出所有字段</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">	model = Snippet</span><br><span class="line">	fields = <span class="string">"__all__"</span></span><br></pre></td></tr></table></figure>
<h4 id="serializers的“外键”"><a href="#serializers的“外键”" class="headerlink" title="serializers的“外键”"></a>serializers的“外键”</h4><ul>
<li>只要在对应的serializers中添加字段覆盖对应的字段就行</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</span><br><span class="line"><span class="keyword">from</span> snippets.models <span class="keyword">import</span> Snippet, Category</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CategorySerializer</span><span class="params">(serializers.ModelSerializer)</span>:</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = GoodsCategory</span><br><span class="line">        fields = <span class="string">"__all__"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SnippetSerializer</span><span class="params">(serializers.ModelSerializer)</span>:</span></span><br><span class="line">    Category = CategorySerializer()</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Snippet</span><br><span class="line">        fields = (<span class="string">'id'</span>, <span class="string">'title'</span>, <span class="string">'code'</span>, <span class="string">'linenos'</span>, <span class="string">'language'</span>, <span class="string">'style'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="使用-mixins-和-GenericAPIView"><a href="#使用-mixins-和-GenericAPIView" class="headerlink" title="使用 mixins 和 GenericAPIView"></a>使用 mixins 和 GenericAPIView</h3><p>GenericAPIView这是用的非常多的一个view，也是非常重要的view</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> mixins</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> generics</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SnippetList</span><span class="params">(mixins.ListModelMixin,</span></span></span><br><span class="line"><span class="class"><span class="params">                  mixins.CreateModelMixin,</span></span></span><br><span class="line"><span class="class"><span class="params">                  generics.GenericAPIView)</span>:</span></span><br><span class="line">    queryset = Snippet.objects.all()</span><br><span class="line">    serializer_class = SnippetSerializer</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.list(request, *args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.create(request, *args, **kwargs)</span><br></pre></td></tr></table></figure>
<p>同样的，在listapiview中也有上面的方法，可以直接继承这个view，减少代码量</p>
<p><img src="https://jaelyn-blog-txcos-1253450780.cos.ap-guangzhou.myqcloud.com/blog/pageimage2018/django_rest_api03.png" alt="ListAPIView"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> snippets.models <span class="keyword">import</span> Snippet</span><br><span class="line"><span class="keyword">from</span> snippets.serializers <span class="keyword">import</span> SnippetSerializer</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> generics</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SnippetList</span><span class="params">(generics.ListCreateAPIView)</span>:</span></span><br><span class="line">    queryset = Snippet.objects.all()</span><br><span class="line">    serializer_class = SnippetSerializer</span><br></pre></td></tr></table></figure>
<p>一共有以下的view可以继承</p>
<p><img src="https://jaelyn-blog-txcos-1253450780.cos.ap-guangzhou.myqcloud.com/blog/pageimage2018/django_rest_vue04.png" alt="generics"></p>
<h3 id="配置分页"><a href="#配置分页" class="headerlink" title="配置分页"></a>配置分页</h3><h4 id="在setting中配置"><a href="#在setting中配置" class="headerlink" title="在setting中配置"></a>在setting中配置</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="string">'PAGE_SIZE'</span>: <span class="number">10</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="在view中配置"><a href="#在view中配置" class="headerlink" title="在view中配置"></a>在view中配置</h4><p>这个配置可以自定义自己的分页配置，这样的话就可以不用在setting中配置了，直接在view中配置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.pagination <span class="keyword">import</span> PageNumberPagination</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> generics</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Goods</span><br><span class="line"><span class="keyword">from</span> goods.serializers <span class="keyword">import</span> GoodsSerializer</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsPagination</span><span class="params">(PageNumberPagination)</span>:</span></span><br><span class="line">    page_size = <span class="number">12</span></span><br><span class="line">    page_size_query_param = <span class="string">'page_size'</span></span><br><span class="line">    page_query_param = <span class="string">"page"</span></span><br><span class="line">    max_page_size = <span class="number">100</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsListViewSet</span><span class="params">(generics.ListAPIView)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    商品列表页, 分页， 搜索， 过滤， 排序</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    queryset = Goods.objects.all()</span><br><span class="line">    serializer_class = GoodsSerializer</span><br><span class="line">    pagination_class = GoodsPagination</span><br></pre></td></tr></table></figure>
<h3 id="使用viewsets"><a href="#使用viewsets" class="headerlink" title="使用viewsets"></a>使用viewsets</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> viewsets</span><br></pre></td></tr></table></figure>
<p>里面的view比较少</p>
<p><img src="https://jaelyn-blog-txcos-1253450780.cos.ap-guangzhou.myqcloud.com/blog/pageimage2018/django_rest_vue05.png" alt="viewsets"></p>
<h4 id="GenericViewSet"><a href="#GenericViewSet" class="headerlink" title="GenericViewSet"></a>GenericViewSet</h4><ul>
<li>在view中继承ListModelMixin和GenericViewSet</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> viewsets</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> mixins</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsListViewSet</span><span class="params">(mixins.ListModelMixin, viewsets.GenericViewSet)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    商品列表页, 分页， 搜索， 过滤， 排序</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    queryset = Goods.objects.all()</span><br><span class="line">    serializer_class = GoodsSerializer</span><br><span class="line">    pagination_class = GoodsPagination</span><br></pre></td></tr></table></figure>
<h5 id="viewset的url配置方法"><a href="#viewset的url配置方法" class="headerlink" title="viewset的url配置方法"></a>viewset的url配置方法</h5><ul>
<li>在url.py文件中配置url</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> snippets.views <span class="keyword">import</span> SnippetViewSet</span><br><span class="line"></span><br><span class="line">snippet_list = SnippetViewSet.as_view(&#123;</span><br><span class="line">    <span class="string">'get'</span>: <span class="string">'list'</span>,</span><br><span class="line">    <span class="string">'post'</span>: <span class="string">'create'</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">   url(<span class="string">r'^snippets/$'</span>, snippet_list, name=<span class="string">'snippet-list'</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h4 id="使用Routers-配置URL"><a href="#使用Routers-配置URL" class="headerlink" title="使用Routers 配置URL"></a>使用Routers 配置URL</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> url, include</span><br><span class="line"><span class="keyword">from</span> rest_framework.routers <span class="keyword">import</span> DefaultRouter</span><br><span class="line"><span class="keyword">from</span> snippets <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create a router and register our viewsets with it.</span></span><br><span class="line">router = DefaultRouter()</span><br><span class="line">router.register(<span class="string">r'snippets'</span>, views.SnippetViewSet)</span><br><span class="line">router.register(<span class="string">r'users'</span>, views.UserViewSet)</span><br><span class="line"></span><br><span class="line"><span class="comment"># The API URLs are now determined automatically by the router.</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(<span class="string">r'^'</span>, include(router.urls))</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="一些view的继承"><a href="#一些view的继承" class="headerlink" title="一些view的继承"></a>一些view的继承</h3><p><img src="https://jaelyn-blog-txcos-1253450780.cos.ap-guangzhou.myqcloud.com/blog/pageimage2018/django_rest_vue06.png" alt="view"></p>
<h3 id="过滤功能"><a href="#过滤功能" class="headerlink" title="过滤功能"></a>过滤功能</h3><ul>
<li>在view中添加</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsListViewSet</span><span class="params">(mixins.ListModelMixin, viewsets.GenericViewSet)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    商品列表页, 分页， 搜索， 过滤， 排序</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="comment"># queryset = Goods.objects.all()</span></span><br><span class="line">    serializer_class = GoodsSerializer</span><br><span class="line">    pagination_class = GoodsPagination</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_queryset</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> Goods.object.filter(shop_price__gt=<span class="number">100</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Filtering"><a href="#Filtering" class="headerlink" title="Filtering"></a>Filtering</h3><h4 id="DjangoFilterBackend"><a href="#DjangoFilterBackend" class="headerlink" title="DjangoFilterBackend"></a><a href="http://www.django-rest-framework.org/api-guide/filtering/#djangofilterbackend" target="_blank" rel="noopener">DjangoFilterBackend</a></h4><h4 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h4><ul>
<li><a href="https://django-filter.readthedocs.io/en/master/" target="_blank" rel="noopener">django-filter</a></li>
</ul>
<h4 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h4><ul>
<li>首先安装</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django-filter</span><br></pre></td></tr></table></figure>
<ul>
<li>将django-filter加到<code>INSTALLED_APPS</code>中</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">    <span class="string">'django_filters'</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<ul>
<li>设置个默认值（可以不设置）</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="string">'DEFAULT_FILTER_BACKENDS'</span>: (<span class="string">'django_filters.rest_framework.DjangoFilterBackend'</span>,)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>使用</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django_filters.rest_framework <span class="keyword">import</span> DjangoFilterBackend</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserListView</span><span class="params">(generics.ListAPIView)</span>:</span></span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">    filter_backends = (DjangoFilterBackend,)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果使用过滤器，就不需要使用get_queryset方法</p>
</blockquote>
<p>例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.pagination <span class="keyword">import</span> PageNumberPagination</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> generics</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Goods</span><br><span class="line"><span class="keyword">from</span> goods.serializers <span class="keyword">import</span> GoodsSerializer</span><br><span class="line"><span class="keyword">from</span> django_filters.rest_framework <span class="keyword">import</span> DjangoFilterBackend</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsPagination</span><span class="params">(PageNumberPagination)</span>:</span></span><br><span class="line">    page_size = <span class="number">12</span></span><br><span class="line">    page_size_query_param = <span class="string">'page_size'</span></span><br><span class="line">    page_query_param = <span class="string">"page"</span></span><br><span class="line">    max_page_size = <span class="number">100</span></span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsListViewSet</span><span class="params">(mixins.ListModelMixin, viewsets.GenericViewSet)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    商品列表页</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    queryset = Goods.objects.all()</span><br><span class="line">    serializer_class = GoodsSerializer</span><br><span class="line">    pagination_class = GoodsPagination</span><br><span class="line">	filter_backends = (DjangoFilterBackend,)</span><br><span class="line">    filter_fields = (<span class="string">'name'</span>, <span class="string">'shop_price'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="自定义Filters"><a href="#自定义Filters" class="headerlink" title="自定义Filters"></a>自定义Filters</h3><ul>
<li>新建filters.py文件</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> generics</span><br><span class="line"><span class="keyword">from</span> django_filters <span class="keyword">import</span> rest_framework <span class="keyword">as</span> filters</span><br><span class="line"><span class="keyword">from</span> myapp <span class="keyword">import</span> Product</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductFilter</span><span class="params">(filters.FilterSet)</span>:</span></span><br><span class="line">    min_price = filters.NumberFilter(name=<span class="string">"price"</span>, lookup_expr=<span class="string">'gte'</span>)</span><br><span class="line">    max_price = filters.NumberFilter(name=<span class="string">"price"</span>, lookup_expr=<span class="string">'lte'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Product</span><br><span class="line">        fields = [<span class="string">'category'</span>, <span class="string">'in_stock'</span>, <span class="string">'min_price'</span>, <span class="string">'max_price'</span>]</span><br></pre></td></tr></table></figure>
<p>例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> django_filters</span><br><span class="line"><span class="keyword">from</span> django.db.models <span class="keyword">import</span> Q</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Goods</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsFilter</span><span class="params">(django_filters.rest_framework.FilterSet)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    商品的过滤类</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    pricemin = django_filters.NumberFilter(name=<span class="string">'shop_price'</span>, help_text=<span class="string">"最低价格"</span>,lookup_expr=<span class="string">'gte'</span>)</span><br><span class="line">    pricemax = django_filters.NumberFilter(name=<span class="string">'shop_price'</span>, lookup_expr=<span class="string">'lte'</span>)</span><br><span class="line">    top_category = django_filters.NumberFilter(method=<span class="string">'top_category_filter'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">top_category_filter</span><span class="params">(self, queryset, name, value)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> queryset.filter(Q(category_id=value)|Q(category__parent_category_id=value)|Q(category__parent_category__parent_category_id=value))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Goods</span><br><span class="line">        fields = [<span class="string">'pricemin'</span>, <span class="string">'pricemax'</span>, <span class="string">'is_hot'</span>, <span class="string">'is_new'</span>]</span><br></pre></td></tr></table></figure>
<p>将view更改</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ...    </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsListViewSet</span><span class="params">(mixins.ListModelMixin, viewsets.GenericViewSet)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    商品列表页</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    queryset = Goods.objects.all()</span><br><span class="line">    serializer_class = GoodsSerializer</span><br><span class="line">    pagination_class = GoodsPagination</span><br><span class="line">	filter_backends = (DjangoFilterBackend,)</span><br><span class="line">    <span class="comment"># filter_fields = ('name', 'shop_price')</span></span><br><span class="line">    filter_class = GoodsFilter</span><br></pre></td></tr></table></figure>
<ul>
<li>模糊查询</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name = django_filters.CharFilter(name=<span class="string">'name'</span>, lookup_expr=<span class="string">'icontains'</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>不加lookup_expr=’icontains’这个字段就是全匹配</p>
</blockquote>
<h3 id="SearchFilter"><a href="#SearchFilter" class="headerlink" title="SearchFilter"></a>SearchFilter</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserListView</span><span class="params">(generics.ListAPIView)</span>:</span></span><br><span class="line">    queryset = User.objects.all()</span><br><span class="line">    serializer_class = UserSerializer</span><br><span class="line">    filter_backends = (filters.SearchFilter,)</span><br><span class="line">    search_fields = (<span class="string">'username'</span>, <span class="string">'email'</span>)</span><br></pre></td></tr></table></figure>
<p>例子：(view.py)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.pagination <span class="keyword">import</span> PageNumberPagination</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> generics</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Goods</span><br><span class="line"><span class="keyword">from</span> goods.serializers <span class="keyword">import</span> GoodsSerializer</span><br><span class="line"><span class="keyword">from</span> django_filters.rest_framework <span class="keyword">import</span> DjangoFilterBackend</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> filters</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsPagination</span><span class="params">(PageNumberPagination)</span>:</span></span><br><span class="line">    page_size = <span class="number">12</span></span><br><span class="line">    page_size_query_param = <span class="string">'page_size'</span></span><br><span class="line">    page_query_param = <span class="string">"page"</span></span><br><span class="line">    max_page_size = <span class="number">100</span></span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsListViewSet</span><span class="params">(mixins.ListModelMixin, viewsets.GenericViewSet)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    商品列表页</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    queryset = Goods.objects.all()</span><br><span class="line">    serializer_class = GoodsSerializer</span><br><span class="line">    pagination_class = GoodsPagination</span><br><span class="line">	filter_backends = (DjangoFilterBackend, filters.SearchFilter)</span><br><span class="line">    filter_class = GoodsFilter</span><br><span class="line">    search_fields = (<span class="string">'^name'</span>, <span class="string">'goods_brief'</span>, <span class="string">'goods_desc'</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p> 在不同字段上使用下面的一些符号可以达到不同的效果</p>
<ul>
<li>‘^’ Starts-with search.</li>
<li>‘=’ Exact matches.</li>
<li>‘@’ Full-text search. (Currently only supported Django’s MySQL backend.)</li>
<li>‘$’ Regex search.</li>
</ul>
</blockquote>
<h3 id="OrderingFilter"><a href="#OrderingFilter" class="headerlink" title="OrderingFilter"></a><a href="http://www.django-rest-framework.org/api-guide/filtering/#orderingfilter" target="_blank" rel="noopener">OrderingFilter</a></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserListView</span><span class="params">(generics.ListAPIView)</span>:</span></span><br><span class="line">    queryset = User.objects.all()</span><br><span class="line">    serializer_class = UserSerializer</span><br><span class="line">    filter_backends = (filters.OrderingFilter,)</span><br><span class="line">    ordering_fields = (<span class="string">'username'</span>, <span class="string">'email'</span>)</span><br></pre></td></tr></table></figure>
<p>例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.pagination <span class="keyword">import</span> PageNumberPagination</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> generics</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Goods</span><br><span class="line"><span class="keyword">from</span> goods.serializers <span class="keyword">import</span> GoodsSerializer</span><br><span class="line"><span class="keyword">from</span> django_filters.rest_framework <span class="keyword">import</span> DjangoFilterBackend</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> filters</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsPagination</span><span class="params">(PageNumberPagination)</span>:</span></span><br><span class="line">    page_size = <span class="number">12</span></span><br><span class="line">    page_size_query_param = <span class="string">'page_size'</span></span><br><span class="line">    page_query_param = <span class="string">"page"</span></span><br><span class="line">    max_page_size = <span class="number">100</span></span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsListViewSet</span><span class="params">(mixins.ListModelMixin, viewsets.GenericViewSet)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    商品列表页</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    queryset = Goods.objects.all()</span><br><span class="line">    serializer_class = GoodsSerializer</span><br><span class="line">    pagination_class = GoodsPagination</span><br><span class="line">	filter_backends = (DjangoFilterBackend, filters.SearchFilter, filters.OrderingFilter)</span><br><span class="line">    filter_class = GoodsFilter</span><br><span class="line">    search_fields = (<span class="string">'^name'</span>, <span class="string">'goods_brief'</span>, <span class="string">'goods_desc'</span>)</span><br><span class="line">    ordering_fields = (<span class="string">'sale'</span>, <span class="string">'time'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="API-Guide"><a href="#API-Guide" class="headerlink" title="API Guide"></a><a href="http://www.django-rest-framework.org/#api-guide" target="_blank" rel="noopener">API Guide</a></h2><p>The API guide is your complete reference manual to all the functionality provided by REST framework.</p>
<ul>
<li><a href="http://www.django-rest-framework.org/api-guide/requests/" target="_blank" rel="noopener">Requests</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/responses/" target="_blank" rel="noopener">Responses</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/views/" target="_blank" rel="noopener">Views</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/generic-views/" target="_blank" rel="noopener">Generic views</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/viewsets/" target="_blank" rel="noopener">Viewsets</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/routers/" target="_blank" rel="noopener">Routers</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/parsers/" target="_blank" rel="noopener">Parsers</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/renderers/" target="_blank" rel="noopener">Renderers</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/serializers/" target="_blank" rel="noopener">Serializers</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/fields/" target="_blank" rel="noopener">Serializer fields</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/relations/" target="_blank" rel="noopener">Serializer relations</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/validators/" target="_blank" rel="noopener">Validators</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/authentication/" target="_blank" rel="noopener">Authentication</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/permissions/" target="_blank" rel="noopener">Permissions</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/throttling/" target="_blank" rel="noopener">Throttling</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/filtering/" target="_blank" rel="noopener">Filtering</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/pagination/" target="_blank" rel="noopener">Pagination</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/versioning/" target="_blank" rel="noopener">Versioning</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/content-negotiation/" target="_blank" rel="noopener">Content negotiation</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/metadata/" target="_blank" rel="noopener">Metadata</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/schemas/" target="_blank" rel="noopener">Schemas</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/format-suffixes/" target="_blank" rel="noopener">Format suffixes</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/reverse/" target="_blank" rel="noopener">Returning URLs</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/exceptions/" target="_blank" rel="noopener">Exceptions</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/status-codes/" target="_blank" rel="noopener">Status codes</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/testing/" target="_blank" rel="noopener">Testing</a></li>
<li><a href="http://www.django-rest-framework.org/api-guide/settings/" target="_blank" rel="noopener">Settings</a></li>
</ul>
]]></content>
      
        <categories>
            
            <category> Django </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Django </tag>
            
            <tag> Django Rest Framework </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Django Rest framework + vue 笔记 03]]></title>
      <url>/2018/02/17/django-rest-vue03/</url>
      <content type="html"><![CDATA[<h3 id="前后端分离的优缺点"><a href="#前后端分离的优缺点" class="headerlink" title="前后端分离的优缺点"></a>前后端分离的优缺点</h3><h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><ul>
<li>pc，app，pad多端适应</li>
<li>SPA开发模式开始流行</li>
<li>前后端开发职责不清</li>
<li>开发效率问题，前后端互相等待</li>
<li>前端一直配合着后端，能力受限</li>
<li>后端开发语言和模版高度耦合，导致开发语言依赖严重</li>
</ul>
<a id="more"></a>
<h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><ul>
<li>前后端学习门槛增加</li>
<li>数据依赖导致文档重要性增加</li>
<li>前端工作量加大</li>
<li>SEO的难度加大</li>
<li>后端开发模式迁移增加成本</li>
</ul>
<h3 id="Restful-API"><a href="#Restful-API" class="headerlink" title="Restful API"></a>Restful API</h3><blockquote>
<p>restful api目前是前后端分离最佳实践</p>
</blockquote>
<ol>
<li>轻量，直接通过http，不需要额外的协议，post/get/put/delete操作</li>
<li>面向资源，具有解释性</li>
<li>数据描述简单，一般通过json或者xml做数据通信</li>
</ol>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><ul>
<li><a href="http://www.ruanyifeng.com/blog/2011/09/restful.html" target="_blank" rel="noopener">理解RESTful架构</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2014/05/restful_api.html" target="_blank" rel="noopener">RESTful API 设计指南</a></li>
</ul>
<h3 id="几个概念"><a href="#几个概念" class="headerlink" title="几个概念"></a>几个概念</h3><h4 id="前端工程化"><a href="#前端工程化" class="headerlink" title="前端工程化"></a>前端工程化</h4><ul>
<li><a href="http://www.cnblogs.com/ihardcoder/p/5378290.html" target="_blank" rel="noopener">浅析前端工程化</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/30192759" target="_blank" rel="noopener">前端工程化小记</a></li>
<li><a href="http://www.cnblogs.com/yexiaochai/p/4901341.html" target="_blank" rel="noopener">前端优化带来的思考，浅谈前端工程化</a></li>
</ul>
<h4 id="数据双向绑定"><a href="#数据双向绑定" class="headerlink" title="数据双向绑定"></a>数据双向绑定</h4><ul>
<li><a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener">mvvm</a></li>
<li><a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener">vue.js</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2015/02/mvcmvp_mvvm.html" target="_blank" rel="noopener">MVC，MVP 和 MVVM 的图示</a></li>
</ul>
<h4 id="组件化开发"><a href="#组件化开发" class="headerlink" title="组件化开发"></a>组件化开发</h4><ul>
<li><a href="http://blog.csdn.net/chenchun91/article/details/53375041" target="_blank" rel="noopener">前端组件化开发</a></li>
<li><a href="https://www.zhihu.com/question/29735633" target="_blank" rel="noopener">什么叫组件化开发？</a></li>
</ul>
<h3 id="vue开发的几个概念"><a href="#vue开发的几个概念" class="headerlink" title="vue开发的几个概念"></a>vue开发的几个概念</h3><h4 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h4><blockquote>
<p>本质上，<em>webpack</em> 是一个现代 JavaScript 应用程序的<em>静态模块打包器(module bundler)</em>。当 webpack 处理应用程序时，它会递归地构建一个<em>依赖关系图(dependency graph)</em>，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 <em>bundle</em>。</p>
</blockquote>
<ul>
<li><a href="https://doc.webpack-china.org/concepts/" target="_blank" rel="noopener">中文官网</a></li>
</ul>
<h4 id="vue，vuex，vue-router，axios"><a href="#vue，vuex，vue-router，axios" class="headerlink" title="vue，vuex，vue-router，axios"></a>vue，vuex，vue-router，axios</h4><blockquote>
<p>vue全家桶</p>
</blockquote>
<ul>
<li><a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener">vue.js</a></li>
</ul>
<h4 id="ES6，babel"><a href="#ES6，babel" class="headerlink" title="ES6，babel"></a>ES6，babel</h4><blockquote>
<p>ES6语法，babel可以将ES6转换成ES5</p>
</blockquote>
<ul>
<li><a href="http://es6.ruanyifeng.com" target="_blank" rel="noopener">《ECMAScript 6 入门》</a></li>
</ul>
]]></content>
      
        <categories>
            
            <category> Django </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Django </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Django Rest framework + vue 笔记 02]]></title>
      <url>/2018/02/16/django-rest-vue02/</url>
      <content type="html"><![CDATA[<p>参考：</p>
<ul>
<li><a href="https://www.lfd.uci.edu/~gohlke/pythonlibs/" target="_blank" rel="noopener">Unofficial Windows Binaries for Python Extension Packages</a></li>
</ul>
<h3 id="Django-REST-framework"><a href="#Django-REST-framework" class="headerlink" title="Django REST framework"></a>Django REST framework</h3><ul>
<li><a href="http://django-rest-framework.org" target="_blank" rel="noopener">官网</a></li>
</ul>
<a id="more"></a>
<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>进入到虚拟环境</p>
<p><code>pip install djangorestframework</code></p>
<p>安装Django，默认安装最新版本</p>
<p><code>pip install -i https://pypi.douban.com/simple django</code> </p>
<p>安装markdown，Markdown support for the browsable API.</p>
<p><code>pip install markdown</code></p>
<p>还需要安装</p>
<p><code>pip install django-filter</code></p>
<h3 id="使用mysql"><a href="#使用mysql" class="headerlink" title="使用mysql"></a>使用mysql</h3><h4 id="setting-py-文件中修改："><a href="#setting-py-文件中修改：" class="headerlink" title="setting.py 文件中修改："></a><strong>setting.py</strong> 文件中修改：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">'default'</span>: &#123;</span><br><span class="line">        <span class="string">'ENGINE'</span>: <span class="string">'django.db.backends.mysql'</span>,</span><br><span class="line">        <span class="string">'NAME'</span>: <span class="string">'teacherAndStudentSystem'</span>,</span><br><span class="line">        <span class="string">'USER'</span>: <span class="string">'root'</span>,</span><br><span class="line">        <span class="string">'PASSWORD'</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="string">'HOST'</span>: <span class="string">'localhost'</span>,</span><br><span class="line">        <span class="string">'PORT'</span>: <span class="string">'3306'</span>,</span><br><span class="line">        <span class="string">'OPTIONS'</span>: &#123;</span><br><span class="line">            <span class="string">'charset'</span>: <span class="string">'utf8mb4'</span>, </span><br><span class="line">            <span class="string">'init_command'</span>: <span class="string">'SET default_storage_engine=INNODB;'</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 MySQLWorkbench 中新建数据库</p>
<h4 id="安装python的mysql驱动"><a href="#安装python的mysql驱动" class="headerlink" title="安装python的mysql驱动"></a>安装python的mysql驱动</h4><p><code>pip install mysqlclient</code></p>
<blockquote>
<p>运行发现报错 “django.db.utils.OperationalError: (1193, “Unknown system variable ‘storage_engine’”)”</p>
<p>参考： </p>
<ul>
<li><a href="http://www.cnblogs.com/chenyang13677/p/7780799.html" target="_blank" rel="noopener">博客园</a></li>
<li><a href="https://stackoverflow.com/questions/37175295/cant-migrate-django-databases-on-mysql-after-upgrading-to-ubuntu-16-04" target="_blank" rel="noopener">stackoverflow</a></li>
</ul>
<p>因为版本的关系，所以只需要改为 <code>SET default_storage_engine=INNODB;</code> 即可</p>
<p>这个表示选择另一种连接方式，后面使用第三方登录的时候要用上</p>
</blockquote>
<h3 id="安装-pillow"><a href="#安装-pillow" class="headerlink" title="安装 pillow"></a>安装 pillow</h3><p><code>pip install pillow</code></p>
<blockquote>
<p>这个是图形第三方插件</p>
</blockquote>
<h3 id="创建apps的package"><a href="#创建apps的package" class="headerlink" title="创建apps的package"></a>创建apps的package</h3><p><strong>注意需要创建的是Python Package，而不是Directory</strong></p>
<h4 id="修改setting"><a href="#修改setting" class="headerlink" title="修改setting"></a>修改setting</h4><p>将apps加入到python的根搜索路径下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build paths inside the project like this: os.path.join(BASE_DIR, ...)</span></span><br><span class="line">BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))</span><br><span class="line">sys.path.insert(<span class="number">0</span>, BASE_DIR)</span><br><span class="line">sys.path.insert(<span class="number">0</span>, os.path.join(BASE_DIR, <span class="string">'apps'</span>))</span><br><span class="line">sys.path.insert(<span class="number">0</span>, os.path.join(BASE_DIR, <span class="string">'extra_apps'</span>))</span><br></pre></td></tr></table></figure>
<p>目前项目目录：</p>
<p><img src="https://jaelyn-blog-txcos-1253450780.cos.ap-guangzhou.myqcloud.com/blog/pageimage2018/django_rest_vue01.png" alt="项目目录01"></p>
<h3 id="vue项目"><a href="#vue项目" class="headerlink" title="vue项目"></a>vue项目</h3><h4 id="安装需要的包"><a href="#安装需要的包" class="headerlink" title="安装需要的包"></a>安装需要的包</h4><p>在vue项目的根目录下执行</p>
<p><code>cnpm install</code> 或 <code>npm install</code></p>
<p>会生成一个model_modules的文件夹</p>
<h4 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h4><p><code>cnpm run dev</code> 或使用 <code>npm run dev</code></p>
<h3 id="设计app和models"><a href="#设计app和models" class="headerlink" title="设计app和models"></a>设计app和models</h3><h4 id="富文本编辑器"><a href="#富文本编辑器" class="headerlink" title="富文本编辑器"></a>富文本编辑器</h4><p>Django-UEditor</p>
<h5 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h5><ul>
<li><a href="http://www.cnblogs.com/fengzheng/p/3822266.html" target="_blank" rel="noopener">Django集成百度富文本编辑器uEditor</a></li>
</ul>
<h5 id="对应代码应用"><a href="#对应代码应用" class="headerlink" title="对应代码应用"></a>对应代码应用</h5><ul>
<li>把这第三方包复制到项目中</li>
<li>在<strong>setting</strong>中设置，加入改包</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">'django.contrib.auth'</span>,</span><br><span class="line">    <span class="string">'django.contrib.contenttypes'</span>,</span><br><span class="line">    <span class="string">'django.contrib.sessions'</span>,</span><br><span class="line">    <span class="string">'django.contrib.messages'</span>,</span><br><span class="line">    <span class="string">'django.contrib.staticfiles'</span>,</span><br><span class="line">    <span class="string">'users.apps.UsersConfig'</span>,</span><br><span class="line">    <span class="string">'DjangoUeditor'</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<ul>
<li>在模型类中导入</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> DjangoUeditor.models <span class="keyword">import</span> UEditorField</span><br></pre></td></tr></table></figure>
<ul>
<li>模型中使用</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">goods_desc = UEditorField(</span><br><span class="line">    verbose_name=<span class="string">u"内容"</span>, </span><br><span class="line">    imagePath=<span class="string">"goods/images/"</span>, </span><br><span class="line">    width=<span class="number">1000</span>, </span><br><span class="line">    height=<span class="number">300</span>, </span><br><span class="line">    filePath=<span class="string">"goods/files/"</span>, </span><br><span class="line">    default=<span class="string">''</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="模型类例子"><a href="#模型类例子" class="headerlink" title="模型类例子"></a>模型类例子</h4><p>在线购物平台的商品模型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> DjangoUeditor.models <span class="keyword">import</span> UEditorField</span><br><span class="line"><span class="comment"># Create your models here.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsCategory</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    商品类别</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    CATEGORY_TYPE = (</span><br><span class="line">        (<span class="number">1</span>, <span class="string">"一级类目"</span>),</span><br><span class="line">        (<span class="number">2</span>, <span class="string">"二级类目"</span>),</span><br><span class="line">        (<span class="number">3</span>, <span class="string">"三级类目"</span>),</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    name = models.CharField(default=<span class="string">""</span>, max_length=<span class="number">30</span>, verbose_name=<span class="string">"类别名"</span>, help_text=<span class="string">"类别名"</span>)</span><br><span class="line">    code = models.CharField(default=<span class="string">""</span>, max_length=<span class="number">30</span>, verbose_name=<span class="string">"类别code"</span>, help_text=<span class="string">"类别code"</span>)</span><br><span class="line">    desc = models.TextField(default=<span class="string">""</span>, verbose_name=<span class="string">"类别描述"</span>, help_text=<span class="string">"类别描述"</span>)</span><br><span class="line">    category_type = models.IntegerField(choices=CATEGORY_TYPE, verbose_name=<span class="string">"类目级别"</span>, help_text=<span class="string">"类目级别"</span>)</span><br><span class="line">    parent_category = models.ForeignKey(<span class="string">"self"</span>, null=<span class="keyword">True</span>, blank=<span class="keyword">True</span>, verbose_name=<span class="string">"父类目级别"</span>, help_text=<span class="string">"父目录"</span>,</span><br><span class="line">                                        related_name=<span class="string">"sub_cat"</span>)</span><br><span class="line">    is_tab = models.BooleanField(default=<span class="keyword">False</span>, verbose_name=<span class="string">"是否导航"</span>, help_text=<span class="string">"是否导航"</span>)</span><br><span class="line">    add_time = models.DateTimeField(default=datetime.now, verbose_name=<span class="string">"添加时间"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        verbose_name = <span class="string">"商品类别"</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsCategoryBrand</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    品牌名</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    category = models.ForeignKey(GoodsCategory, related_name=<span class="string">'brands'</span>, null=<span class="keyword">True</span>, blank=<span class="keyword">True</span>, verbose_name=<span class="string">"商品类目"</span>)</span><br><span class="line">    name = models.CharField(default=<span class="string">""</span>, max_length=<span class="number">30</span>, verbose_name=<span class="string">"品牌名"</span>, help_text=<span class="string">"品牌名"</span>)</span><br><span class="line">    desc = models.TextField(default=<span class="string">""</span>, max_length=<span class="number">200</span>, verbose_name=<span class="string">"品牌描述"</span>, help_text=<span class="string">"品牌描述"</span>)</span><br><span class="line">    image = models.ImageField(max_length=<span class="number">200</span>, upload_to=<span class="string">"brands/"</span>)</span><br><span class="line">    add_time = models.DateTimeField(default=datetime.now, verbose_name=<span class="string">"添加时间"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        verbose_name = <span class="string">"品牌"</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line">        db_table = <span class="string">"goods_goodsbrand"</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Goods</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    商品</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    category = models.ForeignKey(GoodsCategory, verbose_name=<span class="string">"商品类目"</span>)</span><br><span class="line">    goods_sn = models.CharField(max_length=<span class="number">50</span>, default=<span class="string">""</span>, verbose_name=<span class="string">"商品唯一货号"</span>)</span><br><span class="line">    name = models.CharField(max_length=<span class="number">100</span>, verbose_name=<span class="string">"商品名"</span>)</span><br><span class="line">    click_num = models.IntegerField(default=<span class="number">0</span>, verbose_name=<span class="string">"点击数"</span>)</span><br><span class="line">    sold_num = models.IntegerField(default=<span class="number">0</span>, verbose_name=<span class="string">"商品销售量"</span>)</span><br><span class="line">    fav_num = models.IntegerField(default=<span class="number">0</span>, verbose_name=<span class="string">"收藏数"</span>)</span><br><span class="line">    goods_num = models.IntegerField(default=<span class="number">0</span>, verbose_name=<span class="string">"库存数"</span>)</span><br><span class="line">    market_price = models.FloatField(default=<span class="number">0</span>, verbose_name=<span class="string">"市场价格"</span>)</span><br><span class="line">    shop_price = models.FloatField(default=<span class="number">0</span>, verbose_name=<span class="string">"本店价格"</span>)</span><br><span class="line">    goods_brief = models.TextField(max_length=<span class="number">500</span>, verbose_name=<span class="string">"商品简短描述"</span>)</span><br><span class="line">    goods_desc = UEditorField(verbose_name=<span class="string">u"内容"</span>, imagePath=<span class="string">"goods/images/"</span>, width=<span class="number">1000</span>, height=<span class="number">300</span>,</span><br><span class="line">                              filePath=<span class="string">"goods/files/"</span>, default=<span class="string">''</span>)</span><br><span class="line">    ship_free = models.BooleanField(default=<span class="keyword">True</span>, verbose_name=<span class="string">"是否承担运费"</span>)</span><br><span class="line">    goods_front_image = models.ImageField(upload_to=<span class="string">"goods/images/"</span>, null=<span class="keyword">True</span>, blank=<span class="keyword">True</span>, verbose_name=<span class="string">"封面图"</span>)</span><br><span class="line">    is_new = models.BooleanField(default=<span class="keyword">False</span>, verbose_name=<span class="string">"是否新品"</span>)</span><br><span class="line">    is_hot = models.BooleanField(default=<span class="keyword">False</span>, verbose_name=<span class="string">"是否热销"</span>)</span><br><span class="line">    add_time = models.DateTimeField(default=datetime.now, verbose_name=<span class="string">"添加时间"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        verbose_name = <span class="string">'商品'</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexAd</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    category = models.ForeignKey(GoodsCategory, related_name=<span class="string">'category'</span>,verbose_name=<span class="string">"商品类目"</span>)</span><br><span class="line">    goods =models.ForeignKey(Goods, related_name=<span class="string">'goods'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        verbose_name = <span class="string">'首页商品类别广告'</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.goods.name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsImage</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    商品轮播图</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    goods = models.ForeignKey(Goods, verbose_name=<span class="string">"商品"</span>, related_name=<span class="string">"images"</span>)</span><br><span class="line">    image = models.ImageField(upload_to=<span class="string">""</span>, verbose_name=<span class="string">"图片"</span>, null=<span class="keyword">True</span>, blank=<span class="keyword">True</span>)</span><br><span class="line">    add_time = models.DateTimeField(default=datetime.now, verbose_name=<span class="string">"添加时间"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        verbose_name = <span class="string">'商品图片'</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.goods.name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Banner</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    轮播的商品</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    goods = models.ForeignKey(Goods, verbose_name=<span class="string">"商品"</span>)</span><br><span class="line">    image = models.ImageField(upload_to=<span class="string">'banner'</span>, verbose_name=<span class="string">"轮播图片"</span>)</span><br><span class="line">    index = models.IntegerField(default=<span class="number">0</span>, verbose_name=<span class="string">"轮播顺序"</span>)</span><br><span class="line">    add_time = models.DateTimeField(default=datetime.now, verbose_name=<span class="string">"添加时间"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        verbose_name = <span class="string">'轮播商品'</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.goods.name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HotSearchWords</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    热搜词</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    keywords = models.CharField(default=<span class="string">""</span>, max_length=<span class="number">20</span>, verbose_name=<span class="string">"热搜词"</span>)</span><br><span class="line">    index = models.IntegerField(default=<span class="number">0</span>, verbose_name=<span class="string">"排序"</span>)</span><br><span class="line">    add_time = models.DateTimeField(default=datetime.now, verbose_name=<span class="string">"添加时间"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        verbose_name = <span class="string">'热搜词'</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.keywords</span><br></pre></td></tr></table></figure>
<h3 id="自定义User类"><a href="#自定义User类" class="headerlink" title="自定义User类"></a>自定义User类</h3><ul>
<li>在模型类中导入</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> AbstractUser</span><br></pre></td></tr></table></figure>
<ul>
<li>继承该<code>AbstractUser</code>类</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserProfile</span><span class="params">(AbstractUser)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<ul>
<li>引用外键</li>
</ul>
<p>在另一个模型类中导入</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth <span class="keyword">import</span> get_user_model</span><br></pre></td></tr></table></figure>
<p>在外键中使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">User = get_user_model()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ShoppingCart</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    购物车</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    user = models.ForeignKey(User, verbose_name=<span class="string">u"用户"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="独立使用Django的model"><a href="#独立使用Django的model" class="headerlink" title="独立使用Django的model"></a>独立使用<strong>Django</strong>的model</h3><h4 id="进行一些初始化"><a href="#进行一些初始化" class="headerlink" title="进行一些初始化"></a>进行一些初始化</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">pwd = os.path.dirname(os.path.realpath(__file__))</span><br><span class="line">sys.path.append(pwd+<span class="string">"../"</span>)</span><br><span class="line">os.environ.setdefault(<span class="string">"DJANGO_SETTINGS_MODULE"</span>, <span class="string">"Project.settings"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> django</span><br><span class="line">django.setup()</span><br></pre></td></tr></table></figure>
<h4 id="调用"><a href="#调用" class="headerlink" title="调用"></a>调用</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> goods.models <span class="keyword">import</span> GoodsCategory</span><br><span class="line"></span><br><span class="line">all_categorys = GoodsCategory.objects.all()</span><br></pre></td></tr></table></figure>
<p><em>顺序不能错</em></p>
<h3 id="让Django识别媒体文件"><a href="#让Django识别媒体文件" class="headerlink" title="让Django识别媒体文件"></a>让Django识别媒体文件</h3><h4 id="在settings-py中设置"><a href="#在settings-py中设置" class="headerlink" title="在settings.py中设置"></a>在settings.py中设置</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MEDIA_URL = <span class="string">"/media/"</span></span><br><span class="line">MEDIA_ROOT = os.path.join(BASE_DIR, <span class="string">"media"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="在urls-py中配置"><a href="#在urls-py中配置" class="headerlink" title="在urls.py中配置"></a>在urls.py中配置</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Project.settings <span class="keyword">import</span> MEDIA_ROOT</span><br><span class="line"><span class="keyword">from</span> django.views.static <span class="keyword">import</span> serve</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment"># ...more</span></span><br><span class="line">    url(<span class="string">r'^media/(?P&lt;path&gt;.*)$'</span>, serve, &#123;<span class="string">"document_root"</span>: MEDIA_ROOT&#125;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="目前项目目录"><a href="#目前项目目录" class="headerlink" title="目前项目目录"></a>目前项目目录</h3><p><img src="https://jaelyn-blog-txcos-1253450780.cos.ap-guangzhou.myqcloud.com/blog/pageimage2018/django_rest_vue02.png" alt="项目目录02"></p>
]]></content>
      
        <categories>
            
            <category> Django </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Django </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Django Rest framework + vue 笔记 01]]></title>
      <url>/2018/02/14/django-rest-vue01/</url>
      <content type="html"><![CDATA[<p>需要下载的资源</p>
<ul>
<li><a href="https://www.jetbrains.com/pycharm-edu/download/#section=mac" target="_blank" rel="noopener">Pycharm</a></li>
<li><a href="https://www.jetbrains.com/webstorm/download/#section=mac" target="_blank" rel="noopener">WebStorm</a></li>
<li><a href="http://nodejs.cn" target="_blank" rel="noopener">Node.js</a></li>
<li><a href="https://www.mysql.com/products/workbench/" target="_blank" rel="noopener">Mysql Workbench</a></li>
</ul>
<a id="more"></a>
<h3 id="Pycharm-快捷启动（Linux）"><a href="#Pycharm-快捷启动（Linux）" class="headerlink" title="Pycharm 快捷启动（Linux）"></a>Pycharm 快捷启动（Linux）</h3><ol>
<li><code>vim ~/.bashrc</code></li>
<li><code>alias pycharm=&quot;bash /hom/bobby/Downloads/pycharm-2016.3.2/bin/pycharm.sh&quot;</code></li>
<li><code>source ~/.bashrc</code></li>
<li><code>pycharm</code></li>
</ol>
<h3 id="Mysql-管理工具"><a href="#Mysql-管理工具" class="headerlink" title="Mysql 管理工具"></a>Mysql 管理工具</h3><ul>
<li><a href="https://navicat.com/en" target="_blank" rel="noopener">Navicat</a></li>
<li><a href="https://www.mysql.com/products/workbench/" target="_blank" rel="noopener">Mysql Workbench</a></li>
</ul>
<h3 id="Mysql-安装（Linux）"><a href="#Mysql-安装（Linux）" class="headerlink" title="Mysql 安装（Linux）"></a>Mysql 安装（Linux）</h3><h4 id="获取安装包"><a href="#获取安装包" class="headerlink" title="获取安装包"></a>获取安装包</h4><p><code>sudo apt-get install mysql-server</code></p>
<h4 id="查看mysql的状态"><a href="#查看mysql的状态" class="headerlink" title="查看mysql的状态"></a>查看mysql的状态</h4><p><code>ps aux|grep mysqld</code></p>
<blockquote>
<p>看是否有启动成功，并且可以查看端口地址</p>
</blockquote>
<h4 id="进入mysql-shell中"><a href="#进入mysql-shell中" class="headerlink" title="进入mysql shell中"></a>进入mysql shell中</h4><p><code>mysql -uroot -p</code> </p>
<blockquote>
<p>之后输入登录密码</p>
</blockquote>
<h4 id="mysql-shell-的一些操作"><a href="#mysql-shell-的一些操作" class="headerlink" title="mysql shell 的一些操作"></a>mysql shell 的一些操作</h4><h5 id="显示数据库"><a href="#显示数据库" class="headerlink" title="显示数据库"></a>显示数据库</h5><p><code>show databases;</code></p>
<h5 id="退出"><a href="#退出" class="headerlink" title="退出"></a>退出</h5><p><code>exit;</code></p>
<h5 id="配置mysql"><a href="#配置mysql" class="headerlink" title="配置mysql"></a>配置mysql</h5><p><code>vim /etc/mysql/mysql.conf.d/mysqld.cnf</code></p>
<blockquote>
<p>修改其中的 <strong>bind-address</strong> 配置，将IP改为<strong>0.0.0.0</strong></p>
</blockquote>
<h5 id="重启mysql"><a href="#重启mysql" class="headerlink" title="重启mysql"></a>重启mysql</h5><p><code>sudo service mysql restart</code></p>
<h5 id="修改用户权限"><a href="#修改用户权限" class="headerlink" title="修改用户权限"></a>修改用户权限</h5><p><code>GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;root&#39; WITH GR ANT OPTION;</code></p>
<p>刷新用户权限</p>
<p><code>flush privileges;</code></p>
<h5 id="字符集及排序规则"><a href="#字符集及排序规则" class="headerlink" title="字符集及排序规则"></a>字符集及排序规则</h5><p> 使用 <code>utf8 -- UTF-8 Unicode</code> 以及 <code>utf8_general_ci</code></p>
<h3 id="安装python（Linux）"><a href="#安装python（Linux）" class="headerlink" title="安装python（Linux）"></a>安装python（Linux）</h3><blockquote>
<p>安装的时候可以使用 python 豆瓣镜像 <code>-i https://pypi.douban.com/simple</code></p>
</blockquote>
<h4 id="获取python3版本"><a href="#获取python3版本" class="headerlink" title="获取python3版本"></a>获取python3版本</h4><p><code>sudo apt-get install python3.5</code></p>
<h4 id="虚拟环境"><a href="#虚拟环境" class="headerlink" title="虚拟环境"></a>虚拟环境</h4><h5 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h5><p><code>sudo apt-get install python-virtualenv</code></p>
<h5 id="使用虚拟环境"><a href="#使用虚拟环境" class="headerlink" title="使用虚拟环境"></a>使用虚拟环境</h5><p><code>virtualenv py2_env</code></p>
<blockquote>
<p>会创建目录为py2_env的文件夹在该目录下</p>
<p>ps: 移除文件夹 <code>rm -r py2_env/</code>或 <code>rm -f py2_env</code>移除文件，慎用<code>rm -rf py2_env</code></p>
</blockquote>
<h5 id="进入虚拟环境"><a href="#进入虚拟环境" class="headerlink" title="进入虚拟环境"></a>进入虚拟环境</h5><p><code>source py2_env/bin/activate</code></p>
<h5 id="退出虚拟环境"><a href="#退出虚拟环境" class="headerlink" title="退出虚拟环境"></a>退出虚拟环境</h5><p><code>deactivate</code></p>
<h5 id="创建python3的虚拟环境"><a href="#创建python3的虚拟环境" class="headerlink" title="创建python3的虚拟环境"></a>创建python3的虚拟环境</h5><p><code>virtualenv -p python3 py3_env</code></p>
<h5 id="安装pip3版本"><a href="#安装pip3版本" class="headerlink" title="安装pip3版本"></a>安装pip3版本</h5><p><code>sudo apt-get install python3-pip</code></p>
<blockquote>
<p>遇到 “OSError: Command /home/ubuntu/Myvirtualenv/py2_env/bin/python2 - setuptools pkg_resources pip wheel failed with error code 1”这个问题，解决方法：</p>
<ol>
<li><code>export LC_ALL=&quot;en_US.UTF-8&quot;</code></li>
<li><code>export LC_CTYPE=&quot;en_US.UTF-8&quot;</code></li>
<li><code>pip install setuptools</code></li>
</ol>
<p>参考： <a href="https://github.com/certbot/certbot/issues/2883" target="_blank" rel="noopener">setuptools pkg_resources pip wheel failed with error code 1</a></p>
</blockquote>
<h5 id="更新pip版本"><a href="#更新pip版本" class="headerlink" title="更新pip版本"></a>更新pip版本</h5><p><code>pip install --upgrade pip</code></p>
<h4 id="虚拟环境管理"><a href="#虚拟环境管理" class="headerlink" title="虚拟环境管理"></a>虚拟环境管理</h4><h5 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h5><p><code>pip install virtualenvwrapper</code></p>
<h5 id="查找路径"><a href="#查找路径" class="headerlink" title="查找路径"></a>查找路径</h5><p><code>sudo find / -name virtualenvwrapper.sh</code></p>
<blockquote>
<p>/home/ubuntu/.local/bin/virtualenvwrapper.sh</p>
</blockquote>
<h5 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h5><ol>
<li>进入<code>vim ~/.bashrc</code></li>
<li>在最后一行添加</li>
</ol>
<blockquote>
<p>export WORKON_HOME=$HOME/.virtualenvs<br>source /home/ubuntu/.local/bin/virtualenvwrapper.sh</p>
</blockquote>
<ol>
<li>ESC <code>:wq</code>保存</li>
<li><code>source ~/.bashrc</code> 运行生效</li>
</ol>
<h5 id="创建虚拟环境"><a href="#创建虚拟环境" class="headerlink" title="创建虚拟环境"></a>创建虚拟环境</h5><p><code>mkvirtualenv py2_workon_env</code></p>
<h5 id="目录安装所在地"><a href="#目录安装所在地" class="headerlink" title="目录安装所在地"></a>目录安装所在地</h5><p><code>cd ~/.virtualenvs</code></p>
<h5 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h5><ol>
<li><code>workon</code> 查找全部的虚拟目录</li>
<li><code>workon py2_workon_env</code> 使用该虚拟目录</li>
<li><code>deactivate</code> 退出虚拟环境</li>
</ol>
<h5 id="创建python3的虚拟环境-1"><a href="#创建python3的虚拟环境-1" class="headerlink" title="创建python3的虚拟环境"></a>创建python3的虚拟环境</h5><p><code>mkvirtualenv --python=python3 py3_workon_env</code></p>
<blockquote>
<p>ubuntu@VM-65-204-ubuntu:~$ workon<br>py2_workon_env<br>py3_workon_env</p>
</blockquote>
<h3 id="安装-Node-js"><a href="#安装-Node-js" class="headerlink" title="安装 Node.js"></a>安装 Node.js</h3><p>参考：</p>
<ul>
<li><a href="https://nodejs.org/dist/v8.9.3/" target="_blank" rel="noopener">https://nodejs.org/dist/v8.9.3/</a></li>
<li><a href="http://nodejs.cn/download/" target="_blank" rel="noopener">nodejs download</a></li>
<li><a href="https://cnodejs.org/topic/53a92af6c3ee0b58203258fe" target="_blank" rel="noopener">Linux（Ubuntu）下安装NodeJs</a></li>
<li><a href="https://cnodejs.org/topic/53cb1242c9507b40442875f6" target="_blank" rel="noopener">linux下安装nodejs+express(最新版)</a></li>
<li><a href="https://jingyan.baidu.com/article/cdddd41ca7b87853cb00e1af.html" target="_blank" rel="noopener">Linux下nodejs的安装配置</a></li>
</ul>
<h4 id="安装依赖包"><a href="#安装依赖包" class="headerlink" title="安装依赖包"></a>安装依赖包</h4><ul>
<li><code>sudo apt-get install g++</code></li>
<li><code>sudo apt-get install libssl-dev</code></li>
<li><code>sudo apt-get install build-essential</code></li>
</ul>
<h4 id="下载压缩包"><a href="#下载压缩包" class="headerlink" title="下载压缩包"></a>下载压缩包</h4><p><code>wget https://nodejs.org/dist/v8.9.3/node-v8.9.3.tar.gz</code></p>
<h4 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h4><p><code>tar zxvf node-v8.9.3.tar.gz</code></p>
<blockquote>
<p>移动文件 mv source_file new_file</p>
</blockquote>
<h4 id="编译文件"><a href="#编译文件" class="headerlink" title="编译文件"></a>编译文件</h4><ol>
<li>进入到<strong>node-v8.9.3</strong>文件里</li>
<li><code>./configure</code></li>
<li><code>make</code></li>
</ol>
<h4 id="安装-2"><a href="#安装-2" class="headerlink" title="安装"></a>安装</h4><p><code>make install</code></p>
<h4 id="修改环境配置"><a href="#修改环境配置" class="headerlink" title="修改环境配置"></a>修改环境配置</h4><p>参考</p>
<h4 id="尝试"><a href="#尝试" class="headerlink" title="尝试"></a>尝试</h4><ul>
<li><code>sudo apt-get install nodejs-legacy</code></li>
<li><code>sudo apt-get install npm</code></li>
</ul>
<h4 id="cnpm"><a href="#cnpm" class="headerlink" title="cnpm"></a>cnpm</h4><p> <a href="https://npm.taobao.org" target="_blank" rel="noopener">淘宝 NPM 镜像</a></p>
<p>可以使用这个代替npm，国内镜像，下载速度可以更快</p>
<h3 id="安装htop"><a href="#安装htop" class="headerlink" title="安装htop"></a>安装htop</h3><p><code>sudo apt-get install htop</code></p>
<blockquote>
<p>可以查看系统运行的状态</p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> Django </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Django </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Httpie]]></title>
      <url>/2018/02/08/httpie/</url>
      <content type="html"><![CDATA[<h3 id="关于"><a href="#关于" class="headerlink" title="关于"></a>关于</h3><ul>
<li>HTTPie （读aych-tee-tee-pie）是一个 HTTP 的命令行客户端。</li>
<li>其目标是让 CLI 和 web 服务之间的交互尽可能的人性化。</li>
<li>这个工具提供了简洁的 http 命令，允许通过自然的语法发送任意 HTTP 请求数据，展示色彩化的输出。</li>
<li>HTTPie 可用于与 HTTP 服务器做测试、调试和常规交互。<a id="more"></a>
</li>
</ul>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul>
<li>直观的语法</li>
<li>格式化和色彩化的终端输出</li>
<li>内置 JSON 支持</li>
<li>支持上传表单和文件</li>
<li>HTTPS、代理和认证</li>
<li>任意请求数据</li>
<li>自定义头部</li>
<li>持久性会话</li>
<li>类 Wget 下载</li>
<li>支持 Python 2.6, 2.7 和 3.x</li>
<li>支持 Linux, Mac OS X 和 Windows</li>
<li>插件</li>
<li>文档</li>
<li>测试覆盖率</li>
</ul>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p><code>pip install httpie</code></p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://blog.csdn.net/pzw_0612/article/details/46521965" target="_blank" rel="noopener">HTTPie 工具使用入门</a></li>
<li><a href="https://httpie.org/doc" target="_blank" rel="noopener">官方文档</a></li>
</ul>
]]></content>
      
        <categories>
            
            <category> 工具集 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> httpie </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Byobu "多窗口"的Terminal]]></title>
      <url>/2018/02/07/byobu/</url>
      <content type="html"><![CDATA[<link href="/style.css" rel="stylesheet" type="text/css"><script src="/crypto-js.js"></script><script src="/mcommon.js"></script><script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script> <div id="security"> <div> <div class="input-container"> <input type="password" class="form-control" id="pass" placeholder=" 测试密码工具，密码是： lim "/> <label for="pass"> 测试密码工具，密码是： lim </label> <div class="bottom-line"></div> </div> </div> </div> <div id="encrypt-blog" style="display:none"> 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 </div>]]></content>
      
        <categories>
            
            <category> 工具集 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> byobu </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Django 学习笔记—基础01]]></title>
      <url>/2018/01/27/DjangoLearning1/</url>
      <content type="html"><![CDATA[<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="http://python.usyiyi.cn/translate/django_182/index.html" target="_blank" rel="noopener">Django 1.8.2中文文档</a></li>
<li><a href="https://docs.djangoproject.com/en/2.0/" target="_blank" rel="noopener">Django 2.0 官方文档</a></li>
<li><a href="https://code.ziqiangxuetang.com/django/django-tutorial.html" target="_blank" rel="noopener">Django 中文教学 自强学院</a></li>
</ul>
<a id="more"></a>
<h2 id="所需指令"><a href="#所需指令" class="headerlink" title="所需指令"></a>所需指令</h2><h3 id="用指令创建项目"><a href="#用指令创建项目" class="headerlink" title="用指令创建项目"></a>用指令创建项目</h3><p><code>django-admin startproject project</code></p>
<blockquote>
<p>一般不用，直接用pycharm创建就行</p>
</blockquote>
<h3 id="运行应用"><a href="#运行应用" class="headerlink" title="运行应用"></a>运行应用</h3><p><code>python manage.py runserver 8080</code></p>
<p>运行后，才能根据所生成的网址，访问服务器，后面填写服务器的端口</p>
<blockquote>
<p>也可以不写端口，如果没写端口，默认使用8000端口</p>
</blockquote>
<h3 id="创建一个应用"><a href="#创建一个应用" class="headerlink" title="创建一个应用"></a>创建一个应用</h3><p><code>python manage.py startapp djangoAppName(这里填写所需创建应用的名字)</code><br>或<br><code>django-admin startapp djangoAppName</code><br>可以直接在apps目录下创建</p>
<blockquote>
<p>有点类似于模块的意思，分模块开发项目，一个模块对应了view, model等内容，需要创建新的模块的时候，需要使用这个指令。</p>
</blockquote>
<h3 id="生成迁移（makemigrations）"><a href="#生成迁移（makemigrations）" class="headerlink" title="生成迁移（makemigrations）"></a>生成迁移（<code>makemigrations</code>）</h3><p>创建迁移文件</p>
<p><code>python manage.py makemigrations</code></p>
<blockquote>
<p> 创建之后，在所对应的<code>migrations</code>文件夹下面会多出一个<code>.py</code>文件</p>
</blockquote>
<p><strong>如果使用的是Django2.0 并且数据库model中使用了<code>ForeignKey</code>，需要在后面添加 <code>on_delete</code> 关键字</strong></p>
<blockquote>
<p>在使用这个命令的时候，需要在<code>settings.py</code>文件中的<code>INSTALLED_APPS</code>注册应用信息</p>
</blockquote>
<h3 id="执行迁移"><a href="#执行迁移" class="headerlink" title="执行迁移"></a>执行迁移</h3><p>根据迁移文件，形成sql语句，创建对应的表</p>
<p><code>python manage.py migrate</code></p>
<h3 id="创建超级管理员"><a href="#创建超级管理员" class="headerlink" title="创建超级管理员"></a>创建超级管理员</h3><p><code>python manage.py createsuperuser</code></p>
<p>接下来按照提示填写用户名、邮箱、密码</p>
<blockquote>
<p>后台URL: 在网址后面添加admin</p>
</blockquote>
<h3 id="显示所有的指令"><a href="#显示所有的指令" class="headerlink" title="显示所有的指令"></a>显示所有的指令</h3><p><code>python manage.py</code></p>
<p>会显示所有的指令，并且在后面输入<code>help name</code>就可以查看对应指令的具体信息</p>
<h2 id="Model创建"><a href="#Model创建" class="headerlink" title="Model创建"></a>Model创建</h2><ul>
<li>在对应的模版项目下的<code>models.py</code>文件下创建数据库模型文件</li>
<li>创建模型的时候不用创建主键id，系统会自动生成这个主键的列</li>
</ul>
<h3 id="Models-py"><a href="#Models-py" class="headerlink" title="Models.py"></a>Models.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ModelName1</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    title = models.CharField(max_length=<span class="number">20</span>)</span><br><span class="line">    date = models.DateTimeField()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'title name is &#123;&#125;, crate at &#123;&#125;'</span>.format(self.title, self.date)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.title</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ModelName2</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    hname = models.CharField(max_length=<span class="number">10</span>)</span><br><span class="line">    hgender = models.BooleanField()</span><br><span class="line">    content = models.CharField(max_length=<span class="number">1000</span>)</span><br><span class="line">    modelName1ForeignKey = models.ForeignKey(ModelName1, on_delete=models.CASCADE) <span class="comment">#外键</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">gender</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self.hgender:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'男'</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'女'</span></span><br><span class="line"></span><br><span class="line">    gender.short_description = <span class="string">'性别'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">name</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.hname</span><br><span class="line"></span><br><span class="line">    name.short_description = <span class="string">'名字'</span></span><br></pre></td></tr></table></figure>
<h3 id="Django2-0-ForeignKey-变化"><a href="#Django2-0-ForeignKey-变化" class="headerlink" title="Django2.0 ForeignKey 变化"></a>Django2.0 ForeignKey 变化</h3><p>在创建外键的时候遇到报错：</p>
<p><code>TypeError: __init__() missing 1 required positional argument: &#39;on_delete&#39;</code></p>
<p>查询一番后发现Django2.0版本创建外键时需要在后面加上<strong>on_delete</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    manufacturer = models.ForeignKey(</span><br><span class="line">        <span class="string">'Manufacturer'</span>,</span><br><span class="line">        on_delete=models.CASCADE,</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<h2 id="站点管理"><a href="#站点管理" class="headerlink" title="站点管理"></a>站点管理</h2><h3 id="界面本地化"><a href="#界面本地化" class="headerlink" title="界面本地化"></a>界面本地化</h3><p>修改<code>settings.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LANGUAGE_CODE = <span class="string">'zh-Hans'</span></span><br><span class="line">TIME_ZONE = <span class="string">'Asia/Shanghai'</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>修改语言和时区</p>
</blockquote>
<h3 id="向admin中注册应用"><a href="#向admin中注册应用" class="headerlink" title="向admin中注册应用"></a>向admin中注册应用</h3><p>在 <strong>booktest/admin.py</strong> 文件，注册模型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> ModelName</span><br><span class="line">admin.site.register(ModelName)</span><br></pre></td></tr></table></figure>
<ol>
<li>导入<strong>model</strong> 类</li>
<li>在admin中注册该模型类 <code>admin.site.register(ModelName)</code></li>
</ol>
<h3 id="自定义管理页面"><a href="#自定义管理页面" class="headerlink" title="自定义管理页面"></a>自定义管理页面</h3><ul>
<li>Django提供了admin.ModelAdmin类</li>
<li>通过定义ModelAdmin的子类，来定义模型在Admin界面的显示方式</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ModelNameAdmin</span><span class="params">(admin.ModelAdmin)</span>:</span></span><br><span class="line">    list_display = [<span class="string">'id'</span>, <span class="string">'title'</span>, <span class="string">'date'</span>]</span><br><span class="line">    list_filter = [<span class="string">'title'</span>]</span><br><span class="line">    search_fields = [<span class="string">'title'</span>]</span><br><span class="line">    list_per_page = <span class="number">10</span></span><br><span class="line">    fieldsets = [</span><br><span class="line">        (<span class="string">'base'</span>,&#123;<span class="string">'fields'</span>:[<span class="string">'title'</span>]&#125;),</span><br><span class="line">        (<span class="string">'super'</span>,&#123;<span class="string">'fields'</span>:[<span class="string">'date'</span>]&#125;)</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">admin.site.register(BookInfo, BookInfoAdmin)</span><br></pre></td></tr></table></figure>
<h4 id="列表页属性"><a href="#列表页属性" class="headerlink" title="列表页属性"></a>列表页属性</h4><h5 id="list-display"><a href="#list-display" class="headerlink" title="list_display"></a>list_display</h5><ul>
<li>显示字段，可以点击列头进行排序</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list_display = [<span class="string">'pk'</span>, <span class="string">'title'</span>, <span class="string">'date'</span>]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>列表里面填写的是字段的列表名字，表示要在后台页面中显示什么列表字段，先后顺序决定显示顺序</p>
</blockquote>
<h5 id="list-filter"><a href="#list-filter" class="headerlink" title="list_filter"></a>list_filter</h5><ul>
<li>过滤字段，过滤框会出现在右侧</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list_filter = [<span class="string">'title'</span>]</span><br></pre></td></tr></table></figure>
<h5 id="search-fields"><a href="#search-fields" class="headerlink" title="search_fields"></a>search_fields</h5><ul>
<li>搜索字段，搜索框会出现在上侧</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search_fields = [<span class="string">'title'</span>]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>支持模糊查询，根据列表中的字段进行查询</p>
</blockquote>
<h5 id="list-per-page"><a href="#list-per-page" class="headerlink" title="list_per_page"></a>list_per_page</h5><ul>
<li>分页，分页框会出现在下侧</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list_per_page = <span class="number">10</span></span><br></pre></td></tr></table></figure>
<h4 id="添加、修改页属性"><a href="#添加、修改页属性" class="headerlink" title="添加、修改页属性"></a>添加、修改页属性</h4><h5 id="fields"><a href="#fields" class="headerlink" title="fields"></a>fields</h5><ul>
<li>属性的先后顺序</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fields = [<span class="string">'date'</span>, <span class="string">'title'</span>]</span><br></pre></td></tr></table></figure>
<h5 id="fieldsets"><a href="#fieldsets" class="headerlink" title="fieldsets"></a>fieldsets</h5><ul>
<li>属性分组</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fieldsets = [</span><br><span class="line">    (<span class="string">'basic'</span>,&#123;<span class="string">'fields'</span>: [<span class="string">'title'</span>]&#125;),</span><br><span class="line">    (<span class="string">'more'</span>, &#123;<span class="string">'fields'</span>: [<span class="string">'date'</span>]&#125;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="关联对象"><a href="#关联对象" class="headerlink" title="关联对象"></a>关联对象</h3><ul>
<li>对于模型类，有两种注册方式<ul>
<li>方式一：与传统模型类相同</li>
<li>方式二：关联注册</li>
</ul>
</li>
<li>按照BookInfor的注册方式完成HeroInfo的注册</li>
<li>接下来实现关联注册</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="comment"># StackedInline TabularInline</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ModelName2Line</span><span class="params">(admin.TabularInline)</span>:</span></span><br><span class="line">    model = HeroInfo</span><br><span class="line">    extra = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ModelName1Admin</span><span class="params">(admin.ModelAdmin)</span>:</span></span><br><span class="line">    list_display = [<span class="string">'id'</span>, <span class="string">'title'</span>, <span class="string">'date'</span>]</span><br><span class="line">    list_filter = [<span class="string">'title'</span>]</span><br><span class="line">    search_fields = [<span class="string">'title'</span>]</span><br><span class="line">    list_per_page = <span class="number">10</span></span><br><span class="line">    fieldsets = [</span><br><span class="line">        (<span class="string">'base'</span>, &#123;<span class="string">'fields'</span>: [<span class="string">'title'</span>]&#125;),</span><br><span class="line">        (<span class="string">'super'</span>, &#123;<span class="string">'fields'</span>: [<span class="string">'date'</span>]&#125;)</span><br><span class="line">    ]</span><br><span class="line">    inlines = [ModelName2Line]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ModelName2Admin</span><span class="params">(admin.ModelAdmin)</span>:</span></span><br><span class="line">    list_display = [<span class="string">'id'</span>, <span class="string">'name'</span>, <span class="string">'gender'</span>, <span class="string">'content'</span>, <span class="string">'modelName1ForeignKey'</span>]</span><br><span class="line">    list_filter = [<span class="string">'hgender'</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">admin.site.register(ModelName1, ModelName1Admin)</span><br><span class="line">admin.site.register(ModelName2, ModelName2Admin)</span><br></pre></td></tr></table></figure>
<ul>
<li>可以将内嵌的方式改为表格</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ModelName2Line</span><span class="params">(admin.TabularInline)</span></span></span><br></pre></td></tr></table></figure>
<h3 id="布尔值的显示"><a href="#布尔值的显示" class="headerlink" title="布尔值的显示"></a>布尔值的显示</h3><ul>
<li>发布性别的显示不是一个直观的结果，可以使用方法进行封装</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gender</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> self.hgender:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'男'</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'女'</span></span><br><span class="line">gender.short_description = <span class="string">'性别'</span></span><br></pre></td></tr></table></figure>
<ul>
<li>在admin注册中使用gender代替hgender</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ModelName2Admin</span><span class="params">(admin.ModelAdmin)</span>:</span></span><br><span class="line">    list_display = [<span class="string">'id'</span>, <span class="string">'name'</span>, <span class="string">'gender'</span>, <span class="string">'content'</span>]</span><br></pre></td></tr></table></figure>
<h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2><ul>
<li>在django中，视图对WEB请求进行回应</li>
<li>视图接收reqeust对象作为第一个参数，包含了请求的信息</li>
<li>视图就是一个Python函数，被定义在views.py中</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"index"</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">detail</span><span class="params">(request,id)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"detail %s"</span> % id)</span><br></pre></td></tr></table></figure>
<ul>
<li>定义完成视图后，需要配置<code>urls.py</code>，否则无法处理请求</li>
</ul>
<h3 id="urls-py"><a href="#urls-py" class="headerlink" title="urls.py"></a>urls.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> DjangoLearn1 <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'admin/'</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">''</span>,views.index)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>此时，就可以访问了，不过考虑到如果这样填写，模块一多，URL的量一大的话，就会出现多个路由，不方便配置，所以推荐如下</p>
</blockquote>
<ul>
<li>在对应模块里面创建一个 urls.py 的文件，将路由信息写到里面</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">''</span>, views.index, name=<span class="string">'index'</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<ul>
<li>之后，在向主urls.py文件中include进去</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> include, path</span><br><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">''</span>, include(<span class="string">'DjangoLearn1.urls'</span>)),</span><br><span class="line">    path(<span class="string">'admin/'</span>, admin.site.urls),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h2><ul>
<li><p>模板是html页面，可以根据视图中传递的数据填充值</p>
</li>
<li><p>在模板中访问视图传递的数据</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; 输出值，可以是变量，也可以是对象.属性 &#125;&#125;</span><br><span class="line">&#123;% 执行代码段 %&#125;</span><br></pre></td></tr></table></figure>
<h3 id="定义HTML模板"><a href="#定义HTML模板" class="headerlink" title="定义HTML模板"></a>定义HTML模板</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>列表<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">&#123;%for ModeleName1 in ModeleName1List%&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;&#123;ModeleName1.id&#125;&#125;"</span>&gt;</span></span><br><span class="line">    &#123;&#123;ModeleName1.title&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">&#123;%endfor%&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>在模板中访问对象成员时，都以属性的方式访问，即方法也不能加括号</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>详细<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;ModeleName1.title&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  &#123;%for Modele in ModeleName1.ModelName2_set.all%&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;Modele.name&#125;&#125;---&#123;&#123;Modele.content&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  &#123;%endfor%&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="使用模板"><a href="#使用模板" class="headerlink" title="使用模板"></a>使用模板</h3><ul>
<li>编辑views.py文件，在方法中调用模板</li>
<li>Django提供了函数Render()简化视图调用模板、构造上下文</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> ModeleName1</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">(reqeust)</span>:</span></span><br><span class="line">    ModeleName1List = ModeleName1.objects.all()</span><br><span class="line">    <span class="keyword">return</span> render(reqeust, <span class="string">'booktest/index.html'</span>, &#123;<span class="string">'ModeleName1List'</span>: ModeleName1List&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">detail</span><span class="params">(reqeust, id)</span>:</span></span><br><span class="line">    ModeleName1 = ModeleName1.objects.get(pk=id)</span><br><span class="line">    <span class="keyword">return</span> render(reqeust, <span class="string">'booktest/detail.html'</span>, &#123;<span class="string">'ModeleName1'</span>: ModeleName1&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol>
<li>视图 Views： 接受请求，逻辑处理，调用数据，输出响应</li>
<li>配置ulr在自己的应用中匹配url</li>
<li>模型Model：负责与数据库交互</li>
<li>面向对象：模型对象，列表</li>
<li>定义模型类：指出属性及类型，以确定表的结构，迁移</li>
<li>后台管理：创建管理员，启动服务器，admin，注册admin.py</li>
<li>模版：定义显示的样子<ol>
<li>加载：读取文件内容到内存</li>
<li>渲染：填内容</li>
</ol>
</li>
</ol>
]]></content>
      
        <categories>
            
            <category> Django </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Django </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Hexo + nexT 学习笔记]]></title>
      <url>/2017/12/30/HexoLearn-re/</url>
      <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><img src="https://jaelyn-blog-txcos-1253450780.cos.ap-guangzhou.myqcloud.com/blog/pageimage2018/hexo-head.jpeg" alt="hexo-head"></p>
<blockquote>
<ul>
<li>本文内容主要是个人在学习hexo和next中所遇到的一些“坑”和解决方法,而详细的流程网上有很多，在文章的结尾我会贴出我在学习中查找到的比较好的文章。</li>
<li>注意本文不是详细操作步骤，如果需要详细步骤，请直接翻到文章结尾。</li>
</ul>
</blockquote>
<a id="more"></a>
<h2 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h2><ul>
<li><a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo</a></li>
<li><a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="noopener">nexT</a></li>
</ul>
<h2 id="Hexo-和-nexT-的安装"><a href="#Hexo-和-nexT-的安装" class="headerlink" title="Hexo 和 nexT 的安装"></a>Hexo 和 nexT 的安装</h2><blockquote>
<p>在安装 Hexo 之前，需要确保电脑环境要有 <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">Node.js</a> 和 <a href="https://git-scm.com/downloads" target="_blank" rel="noopener">Git</a> 环境, 当然，为了更好的安装 Hexo 还需要 <a href="https://www.npmjs.com" target="_blank" rel="noopener">npm</a>.</p>
</blockquote>
<p>下面是我所使用的版本：<br><img src="https://jaelyn-blog-txcos-1253450780.cos.ap-guangzhou.myqcloud.com/blog/pageimage2018/gitnpmnodeversion.png" alt="gitnpmnodeversion"></p>
<p>安装之后，最常使用的指令如下：</p>
<ol>
<li>生成静态页面</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure>
<ol>
<li>在本地运行</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure>
<ol>
<li>部署到GitHub pages（coding）</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<ol>
<li>清除生成的静态文件</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure>
<h2 id="打开-GitHub-Pages"><a href="#打开-GitHub-Pages" class="headerlink" title="打开 GitHub Pages"></a>打开 GitHub Pages</h2><p>在第一次创建完仓库之后，打开settings选项，向下翻到GitHub Pages选项会发现不能打开，会有一个提示信息：</p>
<blockquote>
<p>GitHub Pages is currently disabled. You must first add content to your repository before you can publish a GitHub Pages site</p>
</blockquote>
<p>是因为该GitHub Pages没有内容，此时只要点击下面的Choose a theme按钮选择一个主题就可以打开和访问了。</p>
<h2 id="SSH-配置"><a href="#SSH-配置" class="headerlink" title="SSH 配置"></a>SSH 配置</h2><ul>
<li>先查看本机用户home目录下是否存在.ssh目录</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ~/.ssh</span><br></pre></td></tr></table></figure>
<ul>
<li>如果有就不用再创建了，如果想重新创建，可以创建一个不同名字的，也可以将原来的删除，再创建。</li>
<li>使用下面指令删除已存在的SSH：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-add -D</span><br><span class="line">rm -r ~/.ssh</span><br></pre></td></tr></table></figure>
<ul>
<li>再创建新的SSH密钥(keys)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ssh-keygen -t rsa -C &quot;your_email@example.com&quot;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这将按照你提供的邮箱地址，创建一对密钥</p>
</blockquote>
<ul>
<li>将生成的<code>id_rsa.pub</code>文件里面的内容拷贝到GitHub 项目中添加公钥，这里推荐在对应 xxx.github.io 项目中加。（settings-&gt;deploy keys）</li>
</ul>
<ul>
<li>最后再用下面指令测试是否连接成功</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure>
<blockquote>
<p>可参考<a href="https://www.zhihu.com/question/21402411" target="_blank" rel="noopener">github提示Permission denied (publickey)，如何才能解决？</a></p>
</blockquote>
<h2 id="同步到GitHub"><a href="#同步到GitHub" class="headerlink" title="同步到GitHub"></a>同步到GitHub</h2><ul>
<li>配置<code>站点文件</code>下的<code>_config.xml</code>文件下的<code>deploy</code>信息。</li>
</ul>
<ul>
<li>安装<code>hexo-deployer-git</code>插件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<blockquote>
<p>关于 https 的问题，如果需要使用自己的域名的话，GitHub pages 是不能打开 Enforce HTTPS 的。所以在配置<code>deploy</code>信息的时候就推荐使用 Clone with SSH 的链接。</p>
</blockquote>
<h2 id="绑定域名"><a href="#绑定域名" class="headerlink" title="绑定域名"></a>绑定域名</h2><ul>
<li>在source文件夹下面创建<code>CNAME</code>文件（没有后缀），里面填上自己的域名。</li>
<li>之后在自己的域名商将自己的域名用<code>CNAME</code>方式指向自己GitHub pages的域名。</li>
</ul>
<p><img src="https://jaelyn-blog-txcos-1253450780.cos.ap-guangzhou.myqcloud.com/blog/pageimage2018/cname-dns.png" alt="cname-dns"></p>
<blockquote>
<p>个人使用的是<a href="https://cloud.tencent.com" target="_blank" rel="noopener">腾讯云</a></p>
</blockquote>
<p>最后需要注意，需要在<code>站点文件</code>的<code>_config.xml</code>文件配置中的<code>skip_render</code>添加:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">skip_render:</span><br><span class="line"> - CNAME</span><br></pre></td></tr></table></figure>
<p>表示跳过该文件的渲染。</p>
<h2 id="nexT-主题配置"><a href="#nexT-主题配置" class="headerlink" title="nexT 主题配置"></a>nexT 主题配置</h2><p>一些我觉得比较实用的效果，参考<a href="https://segmentfault.com/a/1190000009544924" target="_blank" rel="noopener">hexo的next主题个性化配置教程</a>.</p>
<h3 id="添加-README-md"><a href="#添加-README-md" class="headerlink" title="添加 README.md"></a>添加 README.md</h3><p>在<code>站点文件</code>的<code>source</code>目录下添加一个<code>README.md</code>文件，之后修改<code>站点文件</code>下的<code>_config.xml</code>，将<code>skip_render</code>添加<code>README.md</code>，跳过该文件的渲染。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">skip_render:</span><br><span class="line"> - CNAME</span><br><span class="line"> - README.md</span><br></pre></td></tr></table></figure>
<h3 id="Schemes"><a href="#Schemes" class="headerlink" title="Schemes"></a>Schemes</h3><p>个人比较喜欢<code>Gemini</code>样式，相比<code>Pisces</code>样式，该样式不会每篇文章相连过于紧密，会以分块的形式显示出来，比较好看，特别在手机端上效果更显著。具体可以亲自去设置去看看效果。</p>
<h3 id="live2d"><a href="#live2d" class="headerlink" title="live2d"></a>live2d</h3><p>就是网站右下角的萌物”小人，具体可以参考<a href="https://github.com/EYHN/hexo-helper-live2d" target="_blank" rel="noopener">hexo-helper-live2d</a>。下面简要介绍我的做法：</p>
<ol>
<li>在<code>站点文件</code>打开终端输入</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure>
<ol>
<li>在<code>站点文件</code>下的<code>_config.xml</code>最后配置：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">live2d:</span><br><span class="line">  model: z16</span><br></pre></td></tr></table></figure>
<blockquote>
<p>具体的配置可以看文档，可以修改挺多内容的。模型外观参考<a href="https://huaji8.top/post/live2d-plugin-2.0/" target="_blank" rel="noopener">截图预览</a>.</p>
</blockquote>
<h3 id="动态背景"><a href="#动态背景" class="headerlink" title="动态背景"></a>动态背景</h3><p>在<code>主题文件</code>的<code>_config.xml</code>中搜索<code>Canvas-nest</code>可以发现有4个动态背景，可以逐个尝试，也可以同时设置为<code>true</code>，个人只选择了<code>Canvas-nest</code>。</p>
<h3 id="footer"><a href="#footer" class="headerlink" title="footer"></a>footer</h3><p>可以将网站最下的不想要显示的内容设置为<code>false</code>，在<code>主题文件</code>的<code>_config.xml</code>中搜索<code>footer</code>，我的设置如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">footer:</span><br><span class="line">  # Specify the date when the site was setup.</span><br><span class="line">  # If not defined, current year will be used.</span><br><span class="line">  since: 2017</span><br><span class="line"></span><br><span class="line">  # Icon between year and copyright info.</span><br><span class="line">  icon: user</span><br><span class="line"></span><br><span class="line">  # If not defined, will be used `author` from Hexo main config.</span><br><span class="line">  copyright:</span><br><span class="line">  # -------------------------------------------------------------</span><br><span class="line">  # Hexo link (Powered by Hexo).</span><br><span class="line">  powered: false</span><br><span class="line"></span><br><span class="line">  theme:</span><br><span class="line">    # Theme &amp; scheme info link (Theme - NexT.scheme).</span><br><span class="line">    enable: false</span><br><span class="line">    # Version info of NexT after scheme info (vX.X.X).</span><br><span class="line">    version: false</span><br></pre></td></tr></table></figure>
<h3 id="busuanzi访问人数"><a href="#busuanzi访问人数" class="headerlink" title="busuanzi访问人数"></a>busuanzi访问人数</h3><p>在<code>主题文件</code>的<code>_config.xml</code>中搜索<code>busuanzi_count</code>，修改配置，可以在网站底部和文章中显示访问的人数，我的配置如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">busuanzi_count:</span><br><span class="line">  # count values only if the other configs are false</span><br><span class="line">  enable: true</span><br><span class="line">  # custom uv span for the whole site</span><br><span class="line">  site_uv: true</span><br><span class="line">  site_uv_header: &lt;i class=&quot;fa fa-user&quot;&gt;&lt;/i&gt; 访问人数</span><br><span class="line">  site_uv_footer: |</span><br><span class="line">  # custom pv span for the whole site</span><br><span class="line">  site_pv: true</span><br><span class="line">  site_pv_header: &lt;i class=&quot;fa fa-eye&quot;&gt;&lt;/i&gt; 访问总量</span><br><span class="line">  site_pv_footer:</span><br><span class="line">  # custom pv span for one page only</span><br><span class="line">  page_pv: true</span><br><span class="line">  page_pv_header: &lt;i class=&quot;fa fa-file-o&quot;&gt;&lt;/i&gt; 阅读次数</span><br><span class="line">  page_pv_footer:</span><br></pre></td></tr></table></figure>
<h3 id="显示统计字数"><a href="#显示统计字数" class="headerlink" title="显示统计字数"></a>显示统计字数</h3><p>在<code>主题文件</code>的<code>_config.xml</code>中搜索<code>post_wordcount</code>，修改配置，可以在网站底部和文章中显示所统计的字数，我的配置如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">post_wordcount:</span><br><span class="line">  item_text: true</span><br><span class="line">  wordcount: true</span><br><span class="line">  min2read: true</span><br><span class="line">  totalcount: true</span><br><span class="line">  separated_meta: true</span><br></pre></td></tr></table></figure>
<h3 id="增加本地搜索功能"><a href="#增加本地搜索功能" class="headerlink" title="增加本地搜索功能"></a>增加本地搜索功能</h3><p>在<code>主题文件</code>的<code>_config.xml</code>中搜索<code>local_search</code>，设置为<code>true</code>。</p>
<p>参考：</p>
<ul>
<li><a href="http://www.sqlsec.com/2017/12/hexosearch.html" target="_blank" rel="noopener">Hexo博客无法搜索的终极解决方法</a></li>
</ul>
<h3 id="在文章底部增加版权信息"><a href="#在文章底部增加版权信息" class="headerlink" title="在文章底部增加版权信息"></a>在文章底部增加版权信息</h3><p>在<code>主题文件</code>的<code>_config.xml</code>中搜索<code>post_copyright</code>，设置为<code>true</code>。</p>
<h3 id="给文章加密"><a href="#给文章加密" class="headerlink" title="给文章加密"></a>给文章加密</h3><p>参考： <a href="https://github.com/MikeCoder/hexo-blog-encrypt/blob/master/ReadMe.zh.md" target="_blank" rel="noopener">hexo-blog-encrypt</a></p>
<ul>
<li>安装： <code>npm install hexo-blog-encrypt</code>  </li>
<li>首先在 _config.yml 中启用该插件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Security</span><br><span class="line">encrypt:</span><br><span class="line">    enable: true</span><br></pre></td></tr></table></figure>
<ul>
<li>在你的文章的头部添加上对应的字段，如 password, abstract, message</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: hello world</span><br><span class="line">date: 2016-03-30 21:18:02</span><br><span class="line">tags:</span><br><span class="line">    - fdsafsdaf</span><br><span class="line">password: Mike</span><br><span class="line">abstract: Welcome to my blog, enter password to read.</span><br><span class="line">message: Welcome to my blog, enter password to read.</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<h2 id="写文章"><a href="#写文章" class="headerlink" title="写文章"></a>写文章</h2><p>一般使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new xxx</span><br></pre></td></tr></table></figure>
<blockquote>
<p>xxx表示文件的名字，同时也会自动设置为文章标题（后面可改）<br>以之间创建<code>.md</code>文件，添加文章头信息</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">title:  // 文章标题</span><br><span class="line">date: // 创建时间</span><br><span class="line">updated: //跟新文章的时间</span><br><span class="line">tags: // 文章的标签，如果有多个，[tags1, tags2, ...]</span><br><span class="line">categories: // 文章分类</span><br><span class="line">keywords: // 文章关键词，如果有多个，[key1, key2, ...]</span><br><span class="line">description: //文章描述</span><br></pre></td></tr></table></figure>
<p>其中需要注意：</p>
<ul>
<li>如果想要有<code>updated</code>，需要在<code>主题文件</code>下的<code>_config.xml</code>文件中配置<code>post_meta</code>，将<code>updated_at</code>设置为<code>true</code>。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">post_meta:</span><br><span class="line">  item_text: true</span><br><span class="line">  created_at: true</span><br><span class="line">  updated_at: true</span><br><span class="line">  categories: true</span><br></pre></td></tr></table></figure>
<ul>
<li><code>keywords</code>和<code>description</code>的作用是为了搜索引擎寻找关键字。</li>
<li>其中<code>description</code>关键字，在主页上显示的时候就会显示这里面的内容，而不是显示前150个字符。还有另一种方法推荐，就是不写<code>description</code>，而是在文章中插入<code>&lt;!-- more --&gt;</code>注释，这样主页就会显示该注释前的内容。</li>
</ul>
<h2 id="可添加内容"><a href="#可添加内容" class="headerlink" title="可添加内容"></a>可添加内容</h2><p>下面的内容是推广和维护网站相关。</p>
<h3 id="网站分析"><a href="#网站分析" class="headerlink" title="网站分析"></a>网站分析</h3><p>个人使用的是<a href="http://mta.qq.com" target="_blank" rel="noopener">腾讯移动分析</a>，而且nexT也可以直接支持，在<code>主题文件</code>的<code>_config.xml</code>中搜索<code>Tencent MTA ID</code>，将自己在网站上注册的 ID 填写上去就可以统计了。</p>
<h3 id="seo推广"><a href="#seo推广" class="headerlink" title="seo推广"></a>seo推广</h3><p>这里推荐参考<a href="http://harleywang93.com/2017/03/07/Hexo-GitHub-Coding-Pages-搭建博客/" target="_blank" rel="noopener">Hexo+nexT主题搭建个人博客</a>中seo推广部分。</p>
<blockquote>
<p>参考<a href="http://ziyuan.baidu.com" target="_blank" rel="noopener">百度搜索资源平台</a></p>
</blockquote>
<h2 id="推荐阅读"><a href="#推荐阅读" class="headerlink" title="推荐阅读"></a>推荐阅读</h2><ul>
<li><a href="http://www.wuxubj.cn/2016/08/Hexo-nexT-build-personal-blog/index.html" target="_blank" rel="noopener">Hexo+nexT主题搭建个人博客</a></li>
<li><a href="https://www.jianshu.com/p/e7c58f57f60e" target="_blank" rel="noopener">hexo初探—让写作飞起来</a></li>
<li><a href="https://xuanwo.org/2015/03/26/hexo-intor/" target="_blank" rel="noopener">史上最详细的Hexo博客搭建图文教程</a></li>
<li><a href="http://harleywang93.com/2017/03/07/Hexo-GitHub-Coding-Pages-搭建博客/" target="_blank" rel="noopener">Hexo + GitHub (Coding) Pages 搭建博客</a></li>
<li><a href="http://col.dog/2015/11/12/hello-world/" target="_blank" rel="noopener">基于 Hexo 和 GitHub Pages 搭建博客</a></li>
<li><a href="http://blog.csdn.net/xiaoliuge01/article/details/50997754" target="_blank" rel="noopener">Hexo搭建独立博客，托管到Github和Coding上教程</a></li>
<li><a href="http://blog.junyu.io/posts/0008-blog-seo.html" target="_blank" rel="noopener">让更多人看到你的博客</a></li>
<li><a href="http://blog.csdn.net/qq_21165007/article/details/72587999#git报错warning-lf-will-be-replaced-by-crlf问题" target="_blank" rel="noopener">在github上搭建个人网站</a></li>
<li><a href="https://www.zhihu.com/question/30898326" target="_blank" rel="noopener">如何解决百度爬虫无法爬取搭建在Github上的个人博客的问题？</a></li>
<li><a href="http://blog.niices.com/Hexo-Next-Algolia-Search/" target="_blank" rel="noopener">Hexo+Next主题集成Algolia搜索</a></li>
</ul>
]]></content>
      
        <categories>
            
            <category> 博客技术 </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[今天算是把我的博客网站建立起来了]]></title>
      <url>/2017/12/27/hellomyblog/</url>
      <content type="html"><![CDATA[<p>花了三天时间，终于搞定了，这也表示我的文章之旅要开始了。<br>enjoy it !</p>
<a id="more"></a>
]]></content>
      
        <categories>
            
            <category> diary </category>
            
        </categories>
        
        
        <tags>
            
            <tag> diary </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
